<mat-card
    *ngFor="let post of posts"
    [class.mat-elevation-z8]="view.hot===post"
    (mousemove)="view.interest(post)"
    (mouseout)="view.interest(null)"
    (click)="view.showContent[post._id]=view.showContent[post._id]?0:1"
>
    <mat-card-title-group (click)="post.readMore = true" class="pointer">
        <mat-card-title>
            {{post.title}}
        </mat-card-title>
    </mat-card-title-group>

    <img
        [hidden]="!post.imageLoad"
        (load)="post.imageLoad=true"
        [alt]="post.imageAlt"
        [title]="post.imageAlt"
        [src]="post.image||''">
    <div class="card-content">
            <app-markdown-preview *ngIf="post"
            [hidden]="post.readMore"
            class="hide-title"
            [content]="post && post.preview"></app-markdown-preview>
        <mat-expansion-panel (opened)="post.readMore = true"
                        (closed)="post.readMore = false"
                        class="mat-elevation-z0 posting">
            <mat-expansion-panel-header>
                <mat-panel-description>
                    Read {{post.readMore ? 'Less' : 'More'}}
                </mat-panel-description>
            </mat-expansion-panel-header>
            <app-posting [post]="post"
                        (title)="post.title=$event"
                        (image)="post.image=$event"
                        (imageAlt)="post.imageAlt=$event"
                        (preview)="post.preview=$event"></app-posting>
        </mat-expansion-panel>


    </div>
    <mat-card-actions [@fadeInOut]="view.state[post._id]">
        <app-posting-actions [class.just-space]="view.hot!==post" [post]="post" (action)="action($event)"></app-posting-actions>
    </mat-card-actions>
</mat-card>

<div [hidden]="!pageControl.loading" class="align-center">
  <mat-spinner></mat-spinner>
</div>